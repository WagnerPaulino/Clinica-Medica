;              
CREATE USER IF NOT EXISTS SA SALT '6f2ab09b672108fe' HASH 'ef300f15745977bff22e765885f86929106ef60d349b0825062274ee189b8b2b' ADMIN;            
CREATE SEQUENCE PUBLIC.HIBERNATE_SEQUENCE START WITH 1;        
CREATE CACHED TABLE PUBLIC.CONSULTA(
    ID INTEGER NOT NULL,
    ALTURA DOUBLE,
    DESCRICAO VARCHAR(255),
    DIAGNOSTICO VARCHAR(255),
    DT_CONSULTA VARCHAR(255),
    DT_RETORNO VARCHAR(255),
    ESPECIALIDADE VARCHAR(255),
    EXAME VARCHAR(255),
    PESO DOUBLE,
    PRESSAO INTEGER,
    SINTOMAS DOUBLE,
    TRATAMENTO VARCHAR(255),
    VALOR_CONSULTA DOUBLE,
    MEDICO_ID INTEGER,
    RECEPCIONISTAS_ID INTEGER
);       
ALTER TABLE PUBLIC.CONSULTA ADD CONSTRAINT PUBLIC.CONSTRAINT_C PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CONSULTA; 
CREATE CACHED TABLE PUBLIC.MEDICO(
    ID INTEGER NOT NULL,
    BAIRRO VARCHAR(255),
    CELULAR VARCHAR(255),
    CEP VARCHAR(255),
    CIDADE VARCHAR(255),
    CPF VARCHAR(255),
    DT_NASCIMENTO VARCHAR(255),
    EMAIL VARCHAR(255),
    NOME VARCHAR(255),
    NUM_CASA VARCHAR(255),
    RESIDENCIAL VARCHAR(255),
    RG INTEGER NOT NULL,
    RUA VARCHAR(255),
    SEXO VARCHAR(255),
    ESPECIALIDADE VARCHAR(255),
    ID_CRM INTEGER,
    PROPRIETARIO_ID INTEGER
);           
ALTER TABLE PUBLIC.MEDICO ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY(ID);  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.MEDICO;   
CREATE CACHED TABLE PUBLIC.PACIENTE(
    ID_PACIENTE INTEGER NOT NULL,
    BAIRRO VARCHAR(255),
    CELULAR VARCHAR(255),
    CEP VARCHAR(255),
    CIDADE VARCHAR(255),
    CPF VARCHAR(255),
    DT_NASCIMENTO VARCHAR(255),
    EMAIL VARCHAR(255),
    NOME VARCHAR(255),
    NUM_CASA VARCHAR(255),
    RESIDENCIAL VARCHAR(255),
    RG INTEGER NOT NULL,
    RUA VARCHAR(255),
    SEXO VARCHAR(255)
); 
ALTER TABLE PUBLIC.PACIENTE ADD CONSTRAINT PUBLIC.CONSTRAINT_5 PRIMARY KEY(ID_PACIENTE);       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PACIENTE; 
CREATE CACHED TABLE PUBLIC.PROPRIETARIO(
    ID INTEGER NOT NULL,
    BAIRRO VARCHAR(255),
    CELULAR VARCHAR(255),
    CEP VARCHAR(255),
    CIDADE VARCHAR(255),
    CPF VARCHAR(255),
    DT_NASCIMENTO VARCHAR(255),
    EMAIL VARCHAR(255),
    NOME VARCHAR(255),
    NUM_CASA VARCHAR(255),
    RESIDENCIAL VARCHAR(255),
    RG INTEGER NOT NULL,
    RUA VARCHAR(255),
    SEXO VARCHAR(255)
);      
ALTER TABLE PUBLIC.PROPRIETARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(ID);            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PROPRIETARIO;             
CREATE CACHED TABLE PUBLIC.RECEPCIONISTA(
    ID INTEGER NOT NULL,
    BAIRRO VARCHAR(255),
    CELULAR VARCHAR(255),
    CEP VARCHAR(255),
    CIDADE VARCHAR(255),
    CPF VARCHAR(255),
    DT_NASCIMENTO VARCHAR(255),
    EMAIL VARCHAR(255),
    NOME VARCHAR(255),
    NUM_CASA VARCHAR(255),
    RESIDENCIAL VARCHAR(255),
    RG INTEGER NOT NULL,
    RUA VARCHAR(255),
    SEXO VARCHAR(255),
    ADM BOOLEAN,
    CFP_EXISTENTE VARCHAR(255),
    LOGIN VARCHAR(255),
    SENHA VARCHAR(255),
    PROPRIETARIO_ID INTEGER
);       
ALTER TABLE PUBLIC.RECEPCIONISTA ADD CONSTRAINT PUBLIC.CONSTRAINT_6 PRIMARY KEY(ID);           
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RECEPCIONISTA;            
CREATE CACHED TABLE PUBLIC.RECEPCIONISTA_PACIENTES(
    RECEPCIONISTAS_ID INTEGER NOT NULL,
    PACIENTES_ID_PACIENTE INTEGER NOT NULL
);      
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RECEPCIONISTA_PACIENTES;  
CREATE CACHED TABLE PUBLIC."flyway_schema_history"(
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50),
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(100) NOT NULL,
    "installed_on" TIMESTAMP DEFAULT CURRENT_TIMESTAMP() NOT NULL,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
);         
ALTER TABLE PUBLIC."flyway_schema_history" ADD CONSTRAINT PUBLIC."flyway_schema_history_pk" PRIMARY KEY("installed_rank");     
-- 2 +/- SELECT COUNT(*) FROM PUBLIC."flyway_schema_history";  
INSERT INTO PUBLIC."flyway_schema_history"("installed_rank", "version", "description", "type", "script", "checksum", "installed_by", "installed_on", "execution_time", "success") VALUES
(1, '0', '<< Flyway Baseline >>', 'BASELINE', '<< Flyway Baseline >>', NULL, 'SA', TIMESTAMP '2018-09-22 13:47:17.716', 0, TRUE),
(2, '1', 'init', 'SQL', 'V1/V1__init.sql', 0, 'SA', TIMESTAMP '2018-09-22 13:47:17.728', 0, TRUE);  
CREATE INDEX PUBLIC."flyway_schema_history_s_idx" ON PUBLIC."flyway_schema_history"("success");
ALTER TABLE PUBLIC.MEDICO ADD CONSTRAINT PUBLIC.UK_8RVHJL6LFA2USBFVAURJOJMRC UNIQUE(ID_CRM);   
ALTER TABLE PUBLIC.RECEPCIONISTA_PACIENTES ADD CONSTRAINT PUBLIC.FKFTJRVK5LIF1SNLURUEDO5C4A0 FOREIGN KEY(RECEPCIONISTAS_ID) REFERENCES PUBLIC.RECEPCIONISTA(ID) NOCHECK;       
ALTER TABLE PUBLIC.MEDICO ADD CONSTRAINT PUBLIC.FKC9LQ0DJ2IK0YQGA64FH15AYHY FOREIGN KEY(PROPRIETARIO_ID) REFERENCES PUBLIC.PROPRIETARIO(ID) NOCHECK;           
ALTER TABLE PUBLIC.RECEPCIONISTA_PACIENTES ADD CONSTRAINT PUBLIC.FKLSOTGFETWI3FPLBE4SC8UYHGB FOREIGN KEY(PACIENTES_ID_PACIENTE) REFERENCES PUBLIC.PACIENTE(ID_PACIENTE) NOCHECK;               
ALTER TABLE PUBLIC.CONSULTA ADD CONSTRAINT PUBLIC.FKFXSAIW9WLEEK6AGR14AQ414D7 FOREIGN KEY(RECEPCIONISTAS_ID) REFERENCES PUBLIC.RECEPCIONISTA(ID) NOCHECK;      
ALTER TABLE PUBLIC.CONSULTA ADD CONSTRAINT PUBLIC.FKSKWVUUEV2OPTDRJSFEO1PQO83 FOREIGN KEY(MEDICO_ID) REFERENCES PUBLIC.MEDICO(ID) NOCHECK;     
ALTER TABLE PUBLIC.RECEPCIONISTA ADD CONSTRAINT PUBLIC.FKBDNMRARGQB9ONHOWQBYR23EUN FOREIGN KEY(PROPRIETARIO_ID) REFERENCES PUBLIC.PROPRIETARIO(ID) NOCHECK;    
